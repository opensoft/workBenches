{
    "name": "C++ Heavy Development Environment",
    "image": "cpp-bench:brett",
    "workspaceFolder": "/workspace",
    "runArgs": [
        "--cap-add=SYS_PTRACE",
        "--security-opt", 
        "seccomp=unconfined",
        "--ulimit", 
        "core=-1"
    ],
    "customizations": {
        "vscode": {
            "settings": {
                "terminal.integrated.defaultProfile.linux": "zsh",
                "terminal.integrated.profiles.linux": {
                    "zsh": {
                        "path": "/bin/zsh"
                    }
                },
                "cmake.configureOnOpen": false,
                "C_Cpp.default.cppStandard": "c++20",
                "C_Cpp.default.cStandard": "c17",
                "C_Cpp.default.compilerPath": "/usr/bin/g++",
                "C_Cpp.default.intelliSenseMode": "linux-gcc-x64",
                "C_Cpp.clang_format_fallbackStyle": "Google",
                "editor.formatOnSave": true,
                "files.associations": {
                    "*.h": "cpp",
                    "*.hpp": "cpp",
                    "*.cpp": "cpp",
                    "*.cc": "cpp",
                    "*.cxx": "cpp",
                    "CMakeLists.txt": "cmake",
                    "*.cmake": "cmake"
                }
            },
            "extensions": [
                "ms-vscode.cpptools",
                "ms-vscode.cpptools-extension-pack",
                "ms-vscode.cmake-tools",
                "twxs.cmake",
                "ms-vscode.cpptools-themes",
                "xaver.clang-format",
                "jbenden.c-cpp-flylint",
                "vadimcn.vscode-lldb",
                "ms-python.python",
                "ms-python.flake8",
                "ms-python.black-formatter",
                "formulahendry.code-runner",
                "gruntfuggly.todo-tree",
                "streetsidesoftware.code-spell-checker",
                "ms-vscode.hexeditor",
                "ms-vsliveshare.vsliveshare",
                "github.copilot",
                "github.copilot-chat",
                "eamodio.gitlens",
                "mhutchie.git-graph",
                "shd101wyy.markdown-preview-enhanced",
                "yzhang.markdown-all-in-one"
            ]
        }
    },
    "containerEnv": {
        "SHELL": "/bin/zsh",
        "VCPKG_ROOT": "/opt/vcpkg",
        "CC": "/usr/bin/gcc-12",
        "CXX": "/usr/bin/g++-12"
    },
    "remoteUser": "brett",
    "updateRemoteUserUID": false,
    "mounts": [
        "source=${localEnv:HOME}/projects,target=/workspace,type=bind,consistency=cached",
        "source=cppbench-vscode-server,target=/home/brett/.vscode-server,type=volume",
        "source=cppbench-bash-history,target=/home/brett/.bash_history,type=volume",
        "source=cppbench-conan,target=/home/brett/.conan2,type=volume",
        "source=${localEnv:HOME}/.claude,target=/home/brett/.claude,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.local/share/claude,target=/home/brett/.local/share/claude,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.local/state/claude,target=/home/brett/.local/state/claude,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.codex,target=/home/brett/.codex,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.gemini,target=/home/brett/.gemini,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.cursor,target=/home/brett/.cursor,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.copilot,target=/home/brett/.copilot,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.opencode,target=/home/brett/.opencode,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.letta,target=/home/brett/.letta,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.config/opencode,target=/home/brett/.config/opencode,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.config/gh,target=/home/brett/.config/gh,type=bind,consistency=cached,readonly",
        "source=${localEnv:HOME}/.gitconfig,target=/home/brett/.gitconfig,type=bind,readonly",
        "source=${localEnv:HOME}/.git-credentials,target=/home/brett/.git-credentials,type=bind,readonly",
        "source=${localEnv:HOME}/.ssh,target=/home/brett/.ssh,type=bind,readonly",
        "source=${localEnv:HOME}/.p10k.zsh,target=/home/brett/.p10k.zsh,type=bind,consistency=cached"
    ],
    "postStartCommand": "sudo chown -R brett:brett ~/.vscode-server ~/.bash_history || true",
    "forwardPorts": [8000, 8080, 3200, 5200, 9090],
    "portsAttributes": {
        "8000": {
            "label": "HTTP Server",
            "onAutoForward": "notify"
        },
        "8080": {
            "label": "Development Server", 
            "onAutoForward": "notify"
        },
        "3000": {
            "label": "Web App",
            "onAutoForward": "openBrowser"
        }
    }
}